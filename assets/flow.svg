<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 220" fill="none">
  <style>
    text { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
    .box { rx: 10; ry: 10; }
    .label { font-size: 13px; fill: #ffffff; font-weight: 600; text-anchor: middle; }
    .sublabel { font-size: 10px; fill: rgba(255,255,255,0.8); text-anchor: middle; }
    .arrow { stroke: #94a3b8; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    .phase { font-size: 11px; fill: #64748b; text-anchor: middle; font-weight: 500; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Phase labels -->
  <text class="phase" x="100" y="25">SCAN</text>
  <text class="phase" x="300" y="25">DETECT</text>
  <text class="phase" x="500" y="25">PARSE</text>
  <text class="phase" x="700" y="25">PUBLISH</text>

  <!-- Box 1: Terraform Directory -->
  <rect class="box" x="20" y="40" width="160" height="70" fill="#1e3a5f"/>
  <text class="label" x="100" y="70">*.tf files</text>
  <text class="sublabel" x="100" y="88">.terraform.lock.hcl</text>

  <!-- Arrow 1 -->
  <line class="arrow" x1="180" y1="75" x2="220" y2="75"/>

  <!-- Box 2: Backend Detection -->
  <rect class="box" x="220" y="40" width="160" height="70" fill="#7c3aed"/>
  <text class="label" x="300" y="70">Auto-Detect</text>
  <text class="sublabel" x="300" y="88">Cloud / S3 backend</text>

  <!-- Arrow 2 -->
  <line class="arrow" x1="380" y1="75" x2="420" y2="75"/>

  <!-- Box 3: Parse Dependencies -->
  <rect class="box" x="420" y="40" width="160" height="70" fill="#0891b2"/>
  <text class="label" x="500" y="70">Parse Versions</text>
  <text class="sublabel" x="500" y="88">modules + providers</text>

  <!-- Arrow 3 -->
  <line class="arrow" x1="580" y1="75" x2="620" y2="75"/>

  <!-- Box 4: OTEL Metrics -->
  <rect class="box" x="620" y="40" width="160" height="70" fill="#059669"/>
  <text class="label" x="700" y="70">OTEL Metrics</text>
  <text class="sublabel" x="700" y="88">gRPC to collector</text>

  <!-- Bottom row: outputs -->
  <!-- Grafana -->
  <line class="arrow" x1="700" y1="110" x2="700" y2="135"/>
  <rect class="box" x="560" y="140" width="100" height="50" fill="#e97c1a"/>
  <text class="label" x="610" y="170">Grafana</text>

  <rect class="box" x="680" y="140" width="100" height="50" fill="#e6522c"/>
  <text class="label" x="730" y="170">Datadog</text>

  <rect class="box" x="800" y="140" width="90" height="50" fill="#1ce783"/>
  <text class="label" x="845" y="170" fill="#1a1a2e">New Relic</text>

  <!-- Connecting lines to outputs -->
  <line x1="700" y1="135" x2="610" y2="140" stroke="#94a3b8" stroke-width="1.5"/>
  <line x1="700" y1="135" x2="730" y2="140" stroke="#94a3b8" stroke-width="1.5"/>
  <line x1="700" y1="135" x2="845" y2="140" stroke="#94a3b8" stroke-width="1.5"/>
</svg>
